# DESIGN-SYSTEM.md
**Проект**: «Континуум»  
**Назначение**: дизайн-система для ежедневной разработки UI (шрифты, цвета, компоненты, UX-правила, контент/PDF, ReactFlow).  
**Важно**Д: не содержит Vanta/landing-специфики и “тяжёлых” кусков кода — это вынесено в LANDING-MOTION-VANTA.md.

---

## 1) Типографика

### 1.1 Dual Font System (фиксировано)

A) Акцент / брендинг / крупные заголовки  
- Шрифт: Unbounded (Google Fonts)  
- Weight: 300 (строго)  
- Использование: логотип, hero-заголовки landing, крупные CTA  
- Tailwind class: font-unbounded  

B) Интерфейс и чтение  
- Шрифт: Inter (Google Fonts)  
- Использование: основной UI-текст, меню, карточки, формы, длинные тексты  
- Tailwind class: font-sans (default)

## 2) Цветовая система (Light/Dark)

**Требование:** переключение темы бесшовное (плавный transition), без “миганий”.

**Важно:** в проекте две темы — **светлая** и **тёмная**, пользователь может переключать их в интерфейсе.

### Токены (истина)

- `bg-primary`: light `#ffffff`, dark `#0f172a` — основной фон страниц
- `text-primary`: light `#0f172a`, dark `#ffffff` — основной текст
- `border-primary`: light `#0f172a`, dark `#ffffff` — контуры элементов
- `bg-accent`: light `#0f172a`, dark `#ffffff` — активный фон (hover/selected)
- `text-accent`: light `#ffffff`, dark `#0f172a` — текст на активном фоне
- `text-muted`: light `#64748b`, dark `#94a3b8` — вторичный текст

**Принцип:** высокий контраст. Никаких полутонов в границах — только жёсткая линия `1px/2px`.

### 2.1 Материалы (Glass & Air)
Apple‑style материалы используются **в teacher dashboards**. Основная идея: «воздух», мягкие поверхности, стеклянные панели.

**Токены (glass):**
- `--glass-bg`, `--glass-border`, `--glass-shadow`, `--glass-blur`, `--glass-tint`
- `--surface-0`, `--surface-1`, `--surface-2` — глубина слоёв
- `--panel-bg`, `--panel-border`, `--panel-shadow`, `--panel-radius`
- `--card-bg`, `--card-border`, `--card-shadow`, `--card-radius`
- `--control-bg`, `--control-border`, `--control-radius`

**Правило:** стекло всегда с fallback (без blur) и читаемым контентом.

---

## 3) Геометрия UI (Brutalist / Geometry)

### 3.1 Радиусы
**Glass UI:**
- Панели: `--radius-panel` (12–16px)
- Карточки: `--radius-card` (12–14px)
- Контролы: `--radius-control` (10–12px)

**Остальной UI (legacy):**
- По умолчанию: `rounded-none` (0px)

### 3.2 Границы
- **Border thickness:** `border` или `border-2` (последовательно для одного типа компонентов)
- **Цвет границы:** `border-primary`
- **Разделители в списках/таблицах:** допускаются только если не размывают “жёсткость” стиля

Для Glass‑панелей допускаются полупрозрачные границы (`--glass-border`).

---

## 4) Компоненты и формы

### 4.1 Кнопки (Primary)

**Визуал:**
- Фон: белый/прозрачный в light, тёмный/прозрачный в dark
- Граница: `border-2` цветом текста (`border-primary`)
- Текст: `uppercase` + `bold`
- Hover: инверсия (фон ↔ текст)
- Transition: duration ~`300ms`

**Glass UI уточнение:**
- Primary: контрастная заливка + мягкая тень (`--button-shadow`)
- Ghost: полупрозрачный фон (`--control-bg`) и читабельный контур


**UX:**
- **Disabled:** opacity 50–60%, курсор disabled, без изменения геометрии
- **Focus:** видимый outline (a11y), без “свечения”

### 4.2 Инпуты
- Геометрия: `rounded-none`
- Контур: `border` / `border-2` с `border-primary`
- Placeholder: `text-muted`
- Focus: видимый outline
- Ошибка: показывать текстом/подписью (цветовую схему ошибок фиксируем отдельно, если будет)

**Glass UI уточнение:**
- `background: --control-bg`
- `border: --control-border`
- `radius: --control-radius`

---

## 5) ReactFlow (графы юнитов) — визуальные правила

### 5.1 Узлы
- прямоугольные (`rounded-none`)
- фон `bg-primary`
- контур `border-primary`

**Состояния (без введения новых цветов):**
- `locked`: более “тихий” текст (`text-muted`)
- `available`: обычный стиль + очевидное действие
- `in_progress`: небольшой маркер/лейбл (без новых цветов)
- `completed`: допускается инверсия (`bg-accent` + `text-accent`) либо жёсткий маркер

### 5.2 Рёбра
- тип: `smoothstep`
- цвет: `muted` для неактивных, `border-primary` для активных/пройденных
- анимации (“бегущие муравьи”) — только для текущего фокуса, иначе перегруз

---

## 6) Контент (LiteTeX + PDF) — UX и техника отображения

### 6.1 LiteTeX (условия/варианты)
- KaTeX на клиенте
- выглядит как нативный текст, без iframe/рамок
- размер формул: примерно `1.05–1.1em` относительно body (чтобы не “кричало”)

### 6.2 Rich LaTeX (теория/решения) как часть страницы
**Требование:** не использовать браузерный PDF viewer (никаких тулбаров/рамок).

**Вариант реализации:** PDF.js `canvas/text-layer`, lazy-load страниц, адаптивный масштаб под ширину контейнера.

**Правило показа решений:**
- решение показываем только:
  1. после правильного ответа, **или**
  2. после auto-credit (6 ошибок)
- пока попытки не исчерпаны — решения не показываем

---

## 7) Anti-patterns (что не делать)
- скругления “для красоты” на базовых компонентах
- серые полутоновые границы вместо `border-primary`
- множество разных видов primary-кнопки (держим один паттерн)

---

## 8) Мини-чеклист ревью UI
- Unbounded используется только для акцентов и строго weight 300
- Цвета соответствуют токенам `bg/text/border/accent/muted`
- Базовые элементы `rounded-none`
- Hover у primary-кнопок = инверсия
- PDF отображается без browser viewer UI и выглядит как часть страницы
- Решения задач не показываются до `correct` или `auto-credit`
